var g=Object.defineProperty;var tt=(e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var f=(e,t,s)=>(tt(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();class X{constructor(t,s,n){this.type=t,this.timeStamp=s,this.source=n}}class j extends X{constructor(t,s,n,i,r){super(t,s,r),this.x=n,this.y=i}}class et extends X{constructor(t,s,n=null,i){super(t,s,i),this.key=n}}class st extends X{constructor(t,s,n,i,r){super(t,s,r),this.width=n,this.height=i}}function F(e,t,s,n){return Math.sqrt((e-s)**2+(t-n)**2)}function it(e,t){return t!=null?e+Math.random()*(t-e):Math.random()*e}class D{constructor(t,s){this.x=t,this.y=s}add(t){return new D(this.x+t.x,this.y+t.y)}subtract(t){return new v(this.x-t.x,this.y-t.y)}clone(){return new D(this.x,this.y)}}function I(e,t){return new D(e,t)}class v{constructor(t,s){this.x=t,this.y=s}normalize(){const t=new v(this.x,this.y),s=t.magnitude();return s==0||(t.x/=s,t.y/=s),t}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}multiply(t){return new v(this.x*t,this.y*t)}add(t){return new v(this.x+t.x,this.y+t.y)}subtract(t){return new v(this.x-t.x,this.y-t.y)}clone(){return new v(this.x,this.y)}}const at={update(e){switch(e.type){case"mousedown":case"mouseup":case"mousemove":return new j(e.type,e.timeStamp,e.x||0,e.y||0);case"keydown":case"keyup":return new et(e.type,e.timeStamp,e.key);case"resize":return new st(e.type,e.timeStamp,document.body.clientWidth,document.body.clientHeight);case"null":return;default:return new X(e.type,e.timeStamp)}}},Z={state:"IDLE",movementThreshold:10,timeThreshold:800,startX:0,startY:0,startTime:0,update(e){switch(this.state){case"IDLE":e.type=="mousedown"&&(this.state="DOWN",this.startX=e.x||0,this.startY=e.y||0,this.startTime=e.timeStamp);break;case"DOWN":if(e.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(e.x&&e.y&&F(e.x,e.y,this.startX,this.startY)>this.movementThreshold)this.state="IDLE";else if(e.type=="mouseup")return this.state="IDLE",new j("click",e.timeStamp,e.x||0,e.y||0);break}}},lt={internalClickTranslator:{...Z},state:"IDLE",timeThreshold:500,startTime:0,update(e){const t=this.internalClickTranslator.update(e);switch(this.state){case"IDLE":t&&t.type=="click"&&(this.state="READY",this.startTime=t.timeStamp);break;case"READY":if(e.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(t&&t.type=="click")return this.state="IDLE",new j("dblclick",e.timeStamp,e.x||0,e.y||0);break}}},nt={state:"IDLE",movementThreshold:20,startX:0,startY:0,update(e){switch(this.state){case"IDLE":e.type=="mousedown"&&(this.state="DOWN",this.startX=e.x||0,this.startY=e.y||0);break;case"DOWN":if(e.type=="mouseup")this.state="IDLE";else if(e.type=="mousemove"&&e.x&&e.y&&F(e.x,e.y,this.startX,this.startY)>this.movementThreshold)return this.state="DRAG",{type:"dragstart",timeStamp:e.timeStamp,x:e.x,y:e.y};break;case"DRAG":if(e.type=="mousemove")return{type:"drag",timeStamp:e.timeStamp,x:e.x,y:e.y};if(e.type=="mouseup")return this.state="IDLE",{type:"dragend",timeStamp:e.timeStamp,x:e.x,y:e.y};break}}};function G(e){if(e.type=="resize")return{type:e.type,timeStamp:e.timeStamp,width:document.body.clientWidth,height:document.body.clientHeight};if(e.type=="mouseup"||e.type=="mousedown"||e.type=="mousemove"){const t=e;return{type:e.type,timeStamp:e.timeStamp,x:t.x,y:t.y}}else if(e.type=="keyup"||e.type=="keydown"){const t=e;return t.repeat?void 0:{type:e.type,timeStamp:e.timeStamp,key:t.key}}else{console.warn(`event ${e.type} not supported as FundamentalEvent`);return}}function rt(e){const t=[];function s(r){const l=G(r);l&&t.push(l)}window.addEventListener("mousedown",s),window.addEventListener("mouseup",s),window.addEventListener("mousemove",s),window.addEventListener("keydown",s),window.addEventListener("keyup",s),window.addEventListener("resize",s);const n=G(new Event("resize"));n&&t.push(n);function i(r){e(t,r),window.requestAnimationFrame(i)}window.requestAnimationFrame(i)}function ot(e,t=["mousemove","resize"]){const s=[...e];e.length=0,s.forEach(n=>{if(n.type in t){const i=e.findIndex(r=>r.type in t);i>-1?e[i]=n:e.push(n)}else e.push(n)})}function ht(){let e=!0;return document.body.children.length!==1&&(console.error(`document body has ${document.body.children.length} children, expecting 1`),e=!1),document.body.querySelector("body>script")||(console.error("document body must have a script"),e=!1),document.head.querySelector("link, style")&&(console.error("document head must not have link or style tags"),e=!1),e}function ut(e="whitesmoke"){let t=document.createElement("canvas");return document.body.appendChild(t),t.style.setProperty("background",e),document.documentElement.style.setProperty("width","100%"),document.documentElement.style.setProperty("height","100%"),document.documentElement.style.setProperty("margin","0"),document.documentElement.style.setProperty("padding","0"),document.body.style.setProperty("width","100%"),document.body.style.setProperty("height","100%"),document.body.style.setProperty("margin","0"),document.body.style.setProperty("padding","0"),t.style.setProperty("width","100%"),t.style.setProperty("height","100%"),t.style.setProperty("display","block"),t.width=document.body.clientWidth,t.height=document.body.clientHeight,window.addEventListener("resize",()=>{t.width=document.body.clientWidth,t.height=document.body.clientHeight}),console.info(` created ${t.width} by ${t.height} canvas`),t}const dt="0.4.1";function yt(e,t){ot(e);let s=[];for(e.length==0&&e.push({type:"null",timeStamp:t});e.length>0;){const n=e.shift();n&&K.forEach(i=>{const r=i.update(n);r&&s.push(r)})}q&&s.forEach(n=>q(n)),$&&$(t),z&&z(L)}let L;const K=[at,Z,lt,nt];function ft(e){K.push(e),console.log(`added event translator, now ${K.length} translators`)}function mt(e){q=e}let q;function pt(e){z=e}let z;function ct(e){$=e}let $;function wt(){if(console.info(`ðŸ§° SimpleKit v${dt} *Canvas Mode* startup`),!ht())return;const t=ut().getContext("2d");if(!t){console.error("Unable to get graphics context from canvas");return}return L=t,rt(yt),[L.canvas.width,L.canvas.height]}class Pt{constructor(t,s){this.x=t,this.y=s}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save();let s=0;const n=["red","blue","red"],i=(r,l)=>{t.beginPath(),t.arc(r,l,30-s*10,0,Math.PI*2),t.fill(),t.stroke()};for(s=0;s<3;s++)t.fillStyle=n[s],t.strokeStyle="black",t.lineWidth=2,i(this.x,this.y);t.restore()}}class bt{constructor(t,s){this.x=t,this.y=s}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save();let s=0;const n=(i,r)=>{t.beginPath(),t.arc(i,r,36-s*10,0,Math.PI*2),t.fill(),t.stroke()};for(s=0;s<4;s++)s==0?t.strokeStyle="transparent":t.strokeStyle="white",t.fillStyle="black",t.lineWidth=5,n(this.x,this.y);t.restore()}}class xt{constructor(t,s){this.x=t,this.y=s}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save();let s=0;const n=["blue","red","blue","red","blue"],i=(r,l)=>{t.beginPath(),t.arc(r,l,35-s*7.5,0,Math.PI*2),t.fill(),t.stroke()};for(s=0;s<5;s++)t.fillStyle=n[s],t.strokeStyle="black",t.lineWidth=2,i(this.x,this.y);t.restore()}}class St{constructor(t,s){this.x=t,this.y=s}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save();let s=0;const n=["orange","yellow","orange","yellow"],i=(r,l)=>{t.beginPath(),t.arc(r,l,35-s*10,0,Math.PI*2),t.fill(),t.stroke()};for(s=0;s<4;s++)t.fillStyle=n[s],t.strokeStyle="black",t.lineWidth=2,i(this.x,this.y);t.restore()}}class kt{constructor(t,s){this.x=t,this.y=s}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save();let s=0;const n=["green","yellow","green"],i=(r,l)=>{t.beginPath(),t.arc(r,l,34-s*13,0,Math.PI*2),t.fill(),t.stroke()};for(s=0;s<3;s++)t.fillStyle=n[s],t.strokeStyle="black",t.lineWidth=2,i(this.x,this.y);t.restore()}}class vt{constructor(t,s,n=.5,i="yellow"){this.x=t,this.y=s,this.scale=n,this.colour=i}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale);const s=60,n=s*Math.sin(Math.PI/10)/Math.sin(3*Math.PI/10),i=-Math.PI/2;t.beginPath();for(let r=0;r<10;r++){const l=r%2===0?s:n,o=r*Math.PI/5+i;t.lineTo(Math.cos(o)*l,Math.sin(o)*l)}t.closePath(),t.lineWidth=4,t.strokeStyle="black",t.stroke(),t.fillStyle=this.colour,t.fill(),t.restore()}}class Mt{constructor(t,s,n=1,i="yellow"){this.x=t,this.y=s,this.scale=n,this.colour=i}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(Math.PI),t.scale(this.scale,this.scale);const s=0,n=0,i=30,r=this.colour;this.drawStar(t,s,n,i,r,7),t.restore()}drawStar(t,s,n,i,r,l){const o=l;t.fillStyle=r,t.beginPath(),t.moveTo(s,n+i);for(let h=0;h<2*o+1;h++){const d=h%2===0?i:i/2,P=Math.PI*h/o;t.lineTo(s+d*Math.sin(P),n+d*Math.cos(P))}t.closePath(),r&&t.fill(),t.strokeStyle="black",t.stroke()}}class Tt{constructor(t,s,n=1,i="orange"){this.x=t,this.y=s,this.scale=n,this.colour=i}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale);const s=0,n=0,i=30,r=this.colour;this.drawStar(t,s,n,i,r),t.restore()}drawStar(t,s,n,i,r){t.fillStyle=r,t.beginPath(),t.moveTo(s,n+i);for(let o=0;o<2*6+1;o++){const h=o%2===0?i:i/2,d=Math.PI*o/6;t.lineTo(s+h*Math.sin(d),n+h*Math.cos(d))}t.closePath(),r&&t.fill(),t.strokeStyle="black",t.stroke()}}class It{constructor(t,s,n=1,i="yellow"){this.x=t,this.y=s,this.scale=n,this.colour=i}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale);const s=0,n=0,i=30,r=this.colour;this.drawStar(t,s,n,i,r,10),t.restore()}drawStar(t,s,n,i,r,l){const o=l;t.fillStyle=r,t.beginPath(),t.moveTo(s,n+i);for(let h=0;h<2*o+1;h++){const d=h%2===0?i:i/2,P=Math.PI*h/o;t.lineTo(s+d*Math.sin(P),n+d*Math.cos(P))}t.closePath(),r&&t.fill(),t.strokeStyle="black",t.stroke()}}class Et{constructor(t,s,n=1,i="#E1C16E"){this.x=t,this.y=s,this.scale=n,this.colour=i}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale);const s=0,n=0,i=30,r=this.colour;this.drawStar(t,s,n,i,r,4),t.restore()}drawStar(t,s,n,i,r,l){const o=l;t.fillStyle=r,t.beginPath(),t.moveTo(s,n+i);for(let h=0;h<2*o+1;h++){const d=h%2===0?i:i/2,P=Math.PI*h/o;t.lineTo(s+d*Math.sin(P),n+d*Math.cos(P))}t.closePath(),r&&t.fill(),t.strokeStyle="black",t.stroke()}}class Nt{constructor(t,s,n=.7){this.x=t,this.y=s,this.scale=n,this.x=t,this.y=s,this.scale=n}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.fillStyle="#CEA242",t.strokeStyle="white",t.lineWidth=8,t.beginPath(),t.moveTo(-40,-48),t.lineTo(-8,-36),t.lineTo(-35,-14),t.closePath(),t.moveTo(40,-48),t.lineTo(8,-36),t.lineTo(35,-14),t.closePath(),t.fill(),t.beginPath(),t.arc(0,0,40,0,2*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=1,t.beginPath(),t.ellipse(-16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath(),t.ellipse(16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.fillStyle="black",t.beginPath(),t.arc(-16,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(16,-9,5,0,Math.PI*2),t.fill(),t.fillStyle="black",t.beginPath(),t.arc(-16,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(16,-9,5,0,Math.PI*2),t.fill(),t.restore()}}class Rt{constructor(t,s,n=.7){this.x=t,this.y=s,this.scale=n}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.fillStyle="red",t.strokeStyle="white",t.lineWidth=8,t.beginPath(),t.moveTo(-40,-48),t.lineTo(-8,-36),t.lineTo(-35,-14),t.closePath(),t.moveTo(40,-48),t.lineTo(8,-36),t.lineTo(35,-14),t.closePath(),t.fill(),t.beginPath(),t.arc(0,0,40,0,2*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=1,t.beginPath(),t.ellipse(-16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath(),t.ellipse(16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.fillStyle="black",t.beginPath(),t.arc(-20,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(12,-9,5,0,Math.PI*2),t.fill(),t.restore()}}class Wt{constructor(t,s,n=.7){this.x=t,this.y=s,this.scale=n}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.fillStyle="blue",t.strokeStyle="white",t.lineWidth=8,t.beginPath(),t.moveTo(-40,-48),t.lineTo(-8,-36),t.lineTo(-35,-14),t.closePath(),t.moveTo(40,-48),t.lineTo(8,-36),t.lineTo(35,-14),t.closePath(),t.fill(),t.beginPath(),t.arc(0,0,40,0,2*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=1,t.beginPath(),t.ellipse(-16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath(),t.ellipse(16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.fillStyle="black",t.beginPath(),t.arc(-12,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(20,-9,5,0,Math.PI*2),t.fill(),t.restore()}}class Lt{constructor(t,s,n=.7){this.x=t,this.y=s,this.scale=n}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.fillStyle="green",t.strokeStyle="white",t.lineWidth=8,t.beginPath(),t.moveTo(-40,-48),t.lineTo(-8,-36),t.lineTo(-35,-14),t.closePath(),t.moveTo(40,-48),t.lineTo(8,-36),t.lineTo(35,-14),t.closePath(),t.fill(),t.beginPath(),t.arc(0,0,40,0,2*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=1,t.beginPath(),t.ellipse(-16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath(),t.ellipse(16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.fillStyle="black",t.beginPath(),t.arc(-16,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(16,-9,5,0,Math.PI*2),t.fill(),t.restore()}}class Ct{constructor(t,s,n=.7){this.x=t,this.y=s,this.scale=n}set xPosition(t){this.x=t+40}set yPosition(t){this.y=t+40}draw(t){t.save(),t.translate(this.x,this.y),t.scale(this.scale,this.scale),t.fillStyle="gray",t.strokeStyle="white",t.lineWidth=8,t.beginPath(),t.moveTo(-40,-48),t.lineTo(-8,-36),t.lineTo(-35,-14),t.closePath(),t.moveTo(40,-48),t.lineTo(8,-36),t.lineTo(35,-14),t.closePath(),t.fill(),t.beginPath(),t.arc(0,0,40,0,2*Math.PI),t.fill(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=1,t.beginPath(),t.ellipse(-16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.beginPath(),t.ellipse(16,-9,8,14,0,0,Math.PI*2),t.fill(),t.stroke(),t.fillStyle="black",t.beginPath(),t.arc(-16,-9,5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(16,-9,5,0,Math.PI*2),t.fill(),t.restore()}}class U{constructor(t,s,n,i,r=80,l=80,o,h,d=!1){f(this,"matched",!1);f(this,"toSpin",!1);f(this,"angle",0);f(this,"peek",!1);f(this,"playfaceup",!1);f(this,"blueSquare",{draw:t=>{t.fillStyle="lightblue",t.fillRect(this.x+5,this.y+5,70,70)}});this.x=t,this.y=s,this.id=n,this.cardNumber=i,this.width=r,this.height=l,this.drawing=o,this.side=h,this.highlight=d}set xPos(t){this.x=t}set yPos(t){this.y=t}set changeSide(t){this.side=t}set matchedCard(t){this.matched=t}draw(t){this.toSpin==!0?(t.save(),t.translate(this.x+this.width/2,this.y+this.height/2),t.rotate(this.angle),t.translate(-this.x-this.width/2,-this.y-this.height/2),t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle="white",t.strokeStyle="black",t.lineWidth=2,t.fill(),t.stroke(),this.drawing.xPosition=this.x,this.drawing.yPosition=this.y,this.drawing.draw(t),t.restore()):this.side==!0?(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle="white",t.strokeStyle="black",t.lineWidth=2,this.drawing.xPosition=this.x,this.drawing.yPosition=this.y,this.playfaceup==!0&&this.matched==!1&&this.highlight==!0&&(t.beginPath(),t.rect(this.x-2,this.y-2,this.width+4,this.height+4),t.strokeStyle="yellow",t.lineWidth=2,t.stroke()),this.matched==!0&&this.toSpin==!1?(t.fillStyle="#ffffff7f",t.fill(),t.stroke()):(t.fill(),t.stroke()),this.drawing.draw(t)):(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle="white",t.strokeStyle="black",t.lineWidth=1,t.fill(),t.stroke(),this.highlight==!0&&this.matched==!1&&(console.log("Yellow highlight"),t.beginPath(),t.rect(this.x-2,this.y-2,this.width+4,this.height+4),t.strokeStyle="yellow",t.lineWidth=3,t.stroke()),this.blueSquare.draw(t))}}function V(e,t,s,n,i,r){return e>=s&&e<=s+i&&t>=n&&t<=n+r}const B=(e,t,s)=>e+(t-e)*s;class Dt{constructor(t,s,n,i,r,l){f(this,"startValueX");f(this,"startValueY");f(this,"endValueX");f(this,"endValueY");f(this,"duration");f(this,"startTime");f(this,"_isRunning",!1);this.updateValue=l,this.startValueX=t,this.startValueY=s,this.endValueX=n,this.endValueY=i,this.duration=r}start(t){this.startTime=t,this._isRunning=!0}get isRunning(){return this._isRunning}update(t){if(!this._isRunning||this.startTime===void 0)return;const s=Math.min(1,(t-this.startTime)/this.duration);let n=B(this.startValueX,this.endValueX,s),i=B(this.startValueY,this.endValueY,s);this.updateValue(n,i),s>=1&&(this.startTime=void 0,this._isRunning=!1)}}class Yt{constructor(t,s,n){f(this,"startTime");f(this,"_isRunning",!1);this.start_Time=t,this.duration=s,this.updateValue=n}start(t){this.startTime=t,this._isRunning=!0}get isRunning(){return this._isRunning}update(t){if(!this._isRunning||this.startTime===void 0)return;const s=Math.min(1,(t-this.startTime)/this.duration),n=B(0,Math.PI*2,s);this.updateValue(n),s===1&&(this.startTime=void 0,this._isRunning=!1)}}class At{constructor(t,s){f(this,"startTime");f(this,"_isRunning",!1);this.duration=t,this.updateValue=s}start(t){this.startTime=t,this._isRunning=!0}get isRunning(){return this._isRunning}update(t){if(!this._isRunning||this.startTime===void 0)return;const s=Math.min(1,(t-this.startTime)/this.duration);this.updateValue(s),s===1&&(this.startTime=void 0,this._isRunning=!1)}}const Xt={state:"IDLE",movementThreshold:50,startX:0,startY:0,update(e){if(e.type!=="mousedown"&&e.type!=="mouseup"&&e.type!=="mousemove")return;const{x:t,y:s}=e;switch(this.state){case"IDLE":e.type=="mousedown"&&(this.state="DOWN",this.startX=e.x||0,this.startY=e.y||0);break;case"DOWN":e.type=="mouseup"?this.state="IDLE":e.type=="mousemove"&&e.x&&e.y&&F(e.x,e.y,this.startX,this.startY)>this.movementThreshold&&(this.state="GESTURE");break;case"GESTURE":if(e.type=="mouseup")return this.state="IDLE",{type:"gestureend",timeStamp:e.timeStamp,x:e.x,y:e.y};if(!(s<this.startY&&Math.abs(Math.atan((t-this.startX)/(s-this.startY)))<.25))break}}};let u="start",x=0,a=[],c=[],k=[],m=[],y=[],N=!0,S=0,J=!1,Q=0,p=new Array(30),w=new Array(30),W=0,M=0,b=!1,C=[],E=!1,Y,A,H=!1,O=!1;wt();for(let e=0;e<30;e++)p[e]=I(0,0),w[e]=I(0,0);m.push(new Pt(0,0));m.push(new bt(0,0));m.push(new xt(0,0));m.push(new St(0,0));m.push(new kt(0,0));m.push(new vt(0,0));m.push(new Mt(0,0));m.push(new Tt(0,0));m.push(new It(0,0));m.push(new Et(0,0));m.push(new Nt(0,0));m.push(new Rt(0,0));m.push(new Wt(0,0));m.push(new Lt(0,0));m.push(new Ct(0,0));let T=0;for(let e=0;e<15;e++)c.push(new U(0,0,e,T,80,80,m[e],!0)),T=T+1,k.push(new U(0,0,e,T,80,80,m[e],!0)),T=T+1;let _=Math.floor(Math.random()*c.length),_t=c[_];a.push(_t);a.push(k[_]);c.splice(_,1);k.splice(_,1);x+=1;mt($t);ft(Xt);pt(e=>{if(W=e.canvas.height,M=e.canvas.width,zt(),e.clearRect(0,0,e.canvas.width,e.canvas.height),Vt(e),b==!1&&E==!1){if(u!="win"){let t=Math.floor(e.canvas.width/90),s=Math.floor(a.length/t+.99),n=t,i=(e.canvas.height-s*90)/2;i<34&&(i=34);for(let r=1;r<=s;r++)if(r!=s){let l=(e.canvas.width-n*90)/2;for(let o=1;o<=n;o++)a[(r-1)*n+o-1].xPos=90*o-90+l,a[(r-1)*n+o-1].yPos=90*r-90+i}else{let l=a.length-(s-1)*n,o=(e.canvas.width-l*90)/2;for(let h=1;h<=l;h++)a[(r-1)*n+h-1].xPos=90*h-90+o,a[(r-1)*n+h-1].yPos=90*r-90+i}}if(u=="win"){qt(e,e.canvas.width/2,Q),a.forEach(t=>{t.matched=!1});for(let t=0;t<a.length&&t<30;t++)a[t].draw(e)}else{(u=="start"||u=="win_start")&&Kt(e,e.canvas.width/2,a[0].y/2+8);for(let t=0;t<a.length&&t<30;t++)a[t].draw(e)}}else if(b==!0)for(let t=0;t<a.length&&t<30;t++)a[t].draw(e);else if(E==!0)for(let t=0;t<a.length&&t<30;t++)a[t].draw(e)});function Vt(e){Ot(e)}function Ot(e){e.fillStyle="darkgrey",e.fillRect(0,0,e.canvas.width,e.canvas.height)}function Kt(e,t=0,s=0){e.fillStyle="white",e.font="24px sans-serif",e.textAlign="center",e.fillText(`${x} ${x>1?"pairs":"pair"}: Press SPACE to play`,t,s)}function qt(e,t=0,s=0){e.fillStyle="white",e.font="24px sans-serif",e.textAlign="center",e.fillText("you finished! Press SPACE to continue",t,s)}function zt(){let e=!0,t=0;for(t=0;t<a.length;t++)if(a[t].matched==!1){e=!1;break}e==!0&&(u="win",a.forEach(s=>{s.playfaceup=!1,s.highlight=!1,s.matched=!1}),J==!1&&(J=!0,Q=a[0].y/2+8))}function $t(e){const{key:t}=e,{x:s,y:n}=e;switch(e.type){case"gestureend":a.forEach(i=>{V(s,n,i.x,i.y,i.width,i.height)&&i.side==!1&&(i.changeSide=!i.side,H=!0,i.peek=!0,Ht())});break;case"mousemove":a.forEach(i=>{V(s,n,i.x,i.y,i.width,i.height)?i.highlight=!0:i.highlight=!1});break;case"mousedown":break;case"mouseup":break;case"click":if(O==!0)break;u=="play"&&a.forEach(i=>{V(s,n,i.x,i.y,i.width,i.height)&&(S==2?i.cardNumber==y[0].cardNumber?(i.changeSide=!i.side,S-=1,y.splice(0,1)):i.cardNumber==y[1].cardNumber&&(y[1].changeSide=!y[1].side,S-=1,y.splice(1,1)):S<2&&i.matched==!1&&(i.changeSide=!i.side,i.side==!0?(S+=1,i.playfaceup=!0,y.push(i)):(S-=1,y.splice(y.indexOf(i),1))),S==2&&y[0].id==y[1].id&&(y[0].matched=!0,y[1].matched=!0,y[0].toSpin=!0,y[1].toSpin=!0,E=!0,Bt(y[0],y[1]),y.splice(0,2),S=0))});break;case"keydown":switch(t){case"+":let i=Math.floor(Math.random()*c.length),r=c[i];x<15&&(u=="start"||u=="win_start")&&(a.sort(function(l,o){return l.id-o.id}),x+=1,a.push(r),a.push(k[i]),c.splice(i,1),k.splice(i,1),u="start");for(let l=0;l<a.length;l++)p[a[l].cardNumber].x=M/2,p[a[l].cardNumber].y=W/2;for(let l=0;l<a.length;l++)w[a[l].cardNumber]=I(a[l].x,a[l].y);b=!0,R();break;case"-":if(x>1&&(u=="start"||u=="win_start")){a.sort(function(o,h){return o.id-h.id});let l=Math.floor(Math.random()*a.length);c.push(a[l]),a.splice(l,1);for(let o=0;o<a.length;o++)if(a[o].id==c[c.length-1].id){k.push(a[o]),a.splice(o,1);break}u="start",x-=1;for(let o=0;o<a.length;o++)p[a[o].cardNumber].x=M/2,p[a[o].cardNumber].y=W/2;for(let o=0;o<a.length;o++)w[a[o].cardNumber]=I(a[o].x,a[o].y);b=!0,R()}break;case" ":if(u=="win"){u="win_start",a.sort(function(h,d){return h.id-d.id});let l=Math.floor(Math.random()*c.length),o=c[l];x<15&&u=="win_start"&&(a.sort(function(h,d){return h.id-d.id}),x+=1,a.push(o),a.push(k[l]),c.splice(l,1),k.splice(l,1));for(let h=0;h<a.length;h++)p[a[h].cardNumber].x=M/2,p[a[h].cardNumber].y=W/2;for(let h=0;h<a.length;h++)w[a[h].cardNumber]=I(a[h].x,a[h].y);b=!0,R()}else if(u=="win_start"){u="play",N=!1;for(let l=0;l<a.length;l++)a[l].changeSide=N,p[a[l].cardNumber].x=a[l].x,p[a[l].cardNumber].y=a[l].y;for(let l=0;l<a.length;l++){let o=Math.floor(Math.random()*a.length),h=a[l];a[l]=a[o],a[o]=h}for(let l=0;l<a.length;l++)w[a[l].cardNumber].x=a[l].x,w[a[l].cardNumber].y=a[l].y;b=!0,R()}else if(u=="start"){u="play",N=!1;for(let l=0;l<a.length;l++)a[l].changeSide=N,p[a[l].cardNumber].x=a[l].x,p[a[l].cardNumber].y=a[l].y;for(let l=0;l<a.length;l++){let o=Math.floor(Math.random()*a.length),h=a[l];a[l]=a[o],a[o]=h}for(let l=0;l<a.length;l++)w[a[l].cardNumber]=I(a[l].x,a[l].y);b=!0,R()}break;case"q":if(u=="play"){u="start",N=!0;for(let l=0;l<a.length;l++)a[l].changeSide=!0,a[l].matched=!1}break;case"x":if(u=="play"){O=!0;for(let l=0;l<a.length;l++)a[l].side==!1&&(a[l].changeSide=!a[l].side)}break}break;case"keyup":switch(t){case"x":if(u=="play"){for(let i=0;i<a.length;i++)a[i].matched==!1&&(a[i].changeSide=!a[i].side);y.forEach(i=>{i.changeSide=!0}),O=!1}break}break}}function R(){let e=Math.floor(M/90),t=Math.floor(a.length/e+.99),s=e,n=(W-t*90)/2;n<34&&(n=34);for(let i=1;i<=t;i++)if(i!=t){let r=(M-s*90)/2;for(let l=1;l<=s;l++)a[(i-1)*s+l-1].xPos=90*l-90+r,a[(i-1)*s+l-1].yPos=90*i-90+n}else{let r=a.length-(t-1)*s,l=(M-r*90)/2;for(let o=1;o<=r;o++)a[(i-1)*s+o-1].xPos=90*o-90+l,a[(i-1)*s+o-1].yPos=90*i-90+n}for(let i=0;i<a.length;i++)w[a[i].cardNumber].x=a[i].x,w[a[i].cardNumber].y=a[i].y;for(let i=0;i<a.length;i++){let r=0;r=p[a[i].cardNumber].x;let l=0;l=p[a[i].cardNumber].y;let o=w[a[i].cardNumber].x,h=w[a[i].cardNumber].y;C.push(new Dt(r,l,o,h,400,(d,P)=>{i<a.length&&i>=0&&(a[i].x=d,a[i].y=P),C[i].isRunning==!1}))}C.forEach(i=>{i.start(performance.now())})}function Bt(e,t){let s=400;Y=new Yt(0,s,n=>{e.angle=n,t.angle=n}),Y.start(performance.now())}function Ht(){A=new At(500,e=>{}),A.start(performance.now())}ct(e=>{u=="play"&&H==!0&&(A.update(e),A.isRunning==!1&&(H=!1,a.forEach(t=>{t.peek==!0&&(t.peek=!1,t.changeSide=!t.side)}))),b==!0&&C.forEach(t=>{t.update(e),t.isRunning==!0?b=!0:b=!1}),E==!0&&(Y.update(e),Y.isRunning==!1&&(E=!1,a.forEach(t=>{t.toSpin=!1}))),u=="win"&&E==!1&&a.forEach(t=>{t.yPos=t.y+2*Math.sin(e/40)+it(-.1,.1)})});
